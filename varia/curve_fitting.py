import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

mq4_under20 = {'x': [-8.82608695652174, -6.565217391304348, -3.9565217391304355, -1.6086956521739122, 0.304347826086957, 2.4782608695652186, 4.478260869565215, 6.956521739130434, 8.913043478260871, 11.173913043478262, 13.26086956521739, 15.34782608695652, 17.608695652173918],
               'y': [1.2661764705882343, 1.2382352941176458, 1.2014705882352925, 1.1691176470588218, 1.1455882352941158, 1.1205882352941154, 1.0985294117647035, 1.0779411764705857, 1.0602941176470562, 1.0426470588235266, 1.0323529411764678, 1.0191176470588208, 1.0088235294117616]}
MQ4_under20_df = pd.DataFrame(mq4_under20)
mq4_over20 = {'x': [21.000000000000004, 23.043478260869566, 25.260869565217394, 27.521739130434785, 29.869565217391308, 32.652173913043484, 35.434782608695656, 37.69565217391305, 40.1304347826087, 42.78260869565223, 45.08695652173914, 47.69565217391305],
              'y': [0.9926470588235263, 0.9838235294117615, 0.9794117647058791, 0.9735294117647026, 0.9647058823529379, 0.9558823529411732, 0.9455882352941142, 0.9411764705882318, 0.9352941176470553, 0.9294117647058787, 0.9205882352941139, 0.9117647058823491]}
MQ4_over20_df = pd.DataFrame(mq4_over20)

mq135_under20 = {'x': [-9.244186046511626, -6.918604651162788, -4.59302325581395, -2.2093023255813904, -0.05813953488371837, 2.325581395348838, 4.418604651162791, 6.744186046511629, 9.534883720930232, 12.325581395348834, 15.116279069767444, 18.139534883720927],
                 'y': [1.6783410138248844, 1.6064516129032251, 1.5262672811059899, 1.4460829493087546, 1.3824884792626715, 1.3133640552995376, 1.2608294930875559, 1.2027649769585236, 1.1419354838709657, 1.0838709677419331, 1.0396313364055274, 1.011981566820274]}
MQ135_under20_df = pd.DataFrame(mq135_under20)
mq135_over20 = {'x': [21.918604651162802, 25.17441860465116, 28.139534883720934, 31.51162790697675, 34.418604651162795, 37.674418604651166, 40.465116279069775, 43.48837209302326, 46.27906976744187, 48.837209302325604],
                 'y': [0.9815668202764949, 0.9677419354838681, 0.9594470046082921, 0.9511520737327162, 0.9400921658986148, 0.9373271889400894, 0.934562211981564, 0.9290322580645132, 0.920737327188937, 0.912442396313361]}
MQ135_over20_df = pd.DataFrame(mq135_over20)

mq7_under20 = {'x': [-9.14023372287145, -7.220367278797994, -5.300500834724536, -2.8797996661101806, -0.7095158597662738, 1.544240400667782, 3.547579298831387, 5.884808013355592, 8.388981636060102, 10.434056761268785, 13.021702838063433, 14.941569282136893, 17.40400667779633],
               'y': [1.4232175502742226, 1.3793418647166356, 1.3354661791590485, 1.2787934186471652, 1.225776965265081, 1.1855575868372927, 1.147166361974404, 1.1124314442413143, 1.0795246800731237, 1.0612431444241293, 1.0393053016453357, 1.028336380255939, 1.0137111517367434]}
MQ7_under20_df = pd.DataFrame(mq7_under20)
mq7_over20 = {'x': [21.577629382303837, 25.083472454090153, 28.29716193656093, 31.42737896494157, 33.59766277128547, 35.68447412353923, 38.10517529215359, 40.65108514190317, 43.11352253756259, 46.911519198664436, 49.207011686143574],
               'y': [0.9899451553930503, 0.9771480804387541, 0.9606946983546589, 0.9442413162705637, 0.933272394881167, 0.9259597806215693, 0.9149908592321724, 0.9058500914076751, 0.8967093235831777, 0.8784277879341831, 0.8674588665447864]}
MQ7_over20_df = pd.DataFrame(mq7_over20)



# do the curve fitting
MQ4_under20_fit = np.polyfit(MQ4_under20_df['x'], MQ4_under20_df['y'], 2)
MQ135_under20_fit = np.polyfit(MQ135_under20_df['x'], MQ135_under20_df['y'], 2)
MQ7_under20_fit = np.polyfit(MQ7_under20_df['x'], MQ7_under20_df['y'], 2)

MQ4_over20_fit = np.polyfit(MQ4_over20_df['x'], MQ4_over20_df['y'], 1)
MQ135_over20_fit = np.polyfit(MQ135_over20_df['x'], MQ135_over20_df['y'], 1)
MQ7_over20_fit = np.polyfit(MQ7_over20_df['x'], MQ7_over20_df['y'], 1)

# plot the data
plt.figure(figsize=(10, 6))
plt.scatter(MQ4_under20_df['x'], MQ4_under20_df['y'], color='blue', label='MQ4')
plt.scatter(MQ4_over20_df['x'], MQ4_over20_df['y'], color='blue')
plt.scatter(MQ135_under20_df['x'], MQ135_under20_df['y'], color='red', label='MQ135')
plt.scatter(MQ135_over20_df['x'], MQ135_over20_df['y'], color='red')
plt.scatter(MQ7_under20_df['x'], MQ7_under20_df['y'], color='green', label='MQ7')
plt.scatter(MQ7_over20_df['x'], MQ7_over20_df['y'], color='green')


# plot the curve fitting	
plt.plot(MQ135_under20_df['x'], np.polyval(MQ4_under20_fit, MQ135_under20_df['x']), color='blue')
plt.plot(MQ135_over20_df['x'], np.polyval(MQ4_over20_fit, MQ135_over20_df['x']), color='blue')
plt.plot(MQ135_under20_df['x'], np.polyval(MQ135_under20_fit, MQ135_under20_df['x']), color='red')
plt.plot(MQ135_over20_df['x'], np.polyval(MQ135_over20_fit, MQ135_over20_df['x']), color='red')
plt.plot(MQ7_under20_df['x'], np.polyval(MQ7_under20_fit, MQ7_under20_df['x']), color='green')
plt.plot(MQ7_over20_df['x'], np.polyval(MQ7_over20_fit, MQ7_over20_df['x']), color='green')

plt.xlabel('Temperature (Â°C)')
plt.ylabel('Rs/Ro')
plt.legend()
plt.show()

# print the coefficients, a, b, c
# print("MQ4 under 20 a:", MQ4_under20_fit[0], "b:", MQ4_under20_fit[1], "c:", MQ4_under20_fit[2])
# print("MQ4 over 20 a:", MQ4_over20_fit[0], "b:", MQ4_over20_fit[1])

print("MQ135 under 20 a:", MQ135_under20_fit[0], "b:", MQ135_under20_fit[1], "c:", MQ135_under20_fit[2])
print("MQ135 over 20 a:", MQ135_over20_fit[0], "b:", MQ135_over20_fit[1])

# print("MQ7 under 20 a:", MQ7_under20_fit[0], "b:", MQ7_under20_fit[1], "c:", MQ7_under20_fit[2])
# print("MQ7 over 20 a:", MQ7_over20_fit[0], "b:", MQ7_over20_fit[1])

# print the curve fitting equation
# print("MQ4 under 20 y = ", MQ4_under20_fit[0], "x^2 + ", MQ4_under20_fit[1], "x + ", MQ4_under20_fit[2])
# print("MQ4 over 20 y = ", MQ4_over20_fit[0], "x + ", MQ4_over20_fit[1])

print("MQ135 under 20 y = ", MQ135_under20_fit[0], "x^2 + ", MQ135_under20_fit[1], "x + ", MQ135_under20_fit[2])
print("MQ135 over 20 y = ", MQ135_over20_fit[0], "x + ", MQ135_over20_fit[1])

# print("MQ7 under 20 y = ", MQ7_under20_fit[0], "x^2 + ", MQ7_under20_fit[1], "x + ", MQ7_under20_fit[2])
# print("MQ7 over 20 y = ", MQ7_over20_fit[0], "x + ", MQ7_over20_fit[1])



